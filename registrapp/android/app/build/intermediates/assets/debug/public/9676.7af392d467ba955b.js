"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9676],{9676:(N,R,i)=>{i.r(R),i.d(R,{RecuperarPassPageModule:()=>U});var y=i(6814),s=i(95),t=i(9004),g=i(3044),v=i(5861),C=i(2999),a=i(6689),Z=i(4414);const h=[{path:"",component:(()=>{var r;class l{constructor(e,o){this.fb=e,this.alertController=o,this.usuario=null,this.nuevaContrasena="",this.formularioRecuperar=this.fb.group({mail:new s.NI("",[s.kI.required,s.kI.email]),pass:new s.NI("",s.kI.required),pass2:new s.NI("",s.kI.required)});const n=this.formularioRecuperar.get("mail");n&&n.valueChanges.subscribe(m=>{this.buscarUsuario(m)})}ngOnInit(){}buscarUsuario(e){var o=this;return(0,v.Z)(function*(){const n=yield C.K.get({key:"usuarios"}),m=null!=n&&n.value?JSON.parse(n.value):[];if(o.usuario=m.find(u=>u.email===e),o.usuario){const u=o.formularioRecuperar.get("pass"),p=o.formularioRecuperar.get("pass2");var d,c;u&&p&&(u.setValue(null===(d=o.usuario)||void 0===d?void 0:d.contrasena),p.setValue(null===(c=o.usuario)||void 0===c?void 0:c.contrasena))}else{const u=o.formularioRecuperar.get("pass"),p=o.formularioRecuperar.get("pass2");u&&p&&(u.reset(),p.reset())}})()}actualizarContrasena(){var e=this;return(0,v.Z)(function*(){if(e.usuario){const o=e.formularioRecuperar.get("pass"),n=e.formularioRecuperar.get("pass2");if(o&&n){const m=o.value;if(m===n.value){e.usuario.contrasena=m;const c=yield C.K.get({key:"usuarios"}),u=null!=c&&c.value?JSON.parse(c.value):[],p=u.findIndex(I=>{var P;return I.email===(null===(P=e.usuario)||void 0===P?void 0:P.email)});-1!==p&&(u[p]=e.usuario,yield C.K.set({key:"usuarios",value:JSON.stringify(u)}),o.reset(),n.reset())}else e.mostrarAlerta("Contrase\xf1as no coinciden","Las contrase\xf1as ingresadas no coinciden. Por favor, int\xe9ntalo de nuevo.")}}else e.mostrarAlerta("Usuario no encontrado","El usuario no fue encontrado. Verifica el correo electr\xf3nico.")})()}mostrarAlerta(e,o){var n=this;return(0,v.Z)(function*(){yield(yield n.alertController.create({header:e,message:o,buttons:["OK"]})).present()})()}}return(r=l).\u0275fac=function(e){return new(e||r)(a.Y36(s.qu),a.Y36(Z.Br))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-recuperar-pass"]],decls:23,vars:1,consts:[[3,"formGroup"],["position","floating"],["type","email","formControlName","mail"],["type","password","formControlName","pass"],["type","password","formControlName","pass2"],["expand","full",3,"click"],["routerLink","/login","expand","block",1,"ion-margin-top"]],template:function(e,o){1&e&&(a.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a._uU(3,"Recuperar Contrase\xf1a"),a.qZA()()(),a.TgZ(4,"ion-content")(5,"form",0)(6,"ion-list")(7,"ion-item")(8,"ion-label",1),a._uU(9,"Correo Electr\xf3nico"),a.qZA(),a._UZ(10,"ion-input",2),a.qZA(),a.TgZ(11,"ion-item")(12,"ion-label",1),a._uU(13,"Nueva Contrase\xf1a"),a.qZA(),a._UZ(14,"ion-input",3),a.qZA(),a.TgZ(15,"ion-item")(16,"ion-label",1),a._uU(17,"Confirmar Contrase\xf1a"),a.qZA(),a._UZ(18,"ion-input",4),a.qZA()()(),a.TgZ(19,"ion-button",5),a.NdJ("click",function(){return o.actualizarContrasena()}),a._uU(20,"Cambiar Contrase\xf1a"),a.qZA(),a.TgZ(21,"ion-button",6),a._uU(22,"Volver al login"),a.qZA()()),2&e&&(a.xp6(5),a.Q6J("formGroup",o.formularioRecuperar))},dependencies:[s._Y,s.JJ,s.JL,s.sg,s.u,t.YG,t.W2,t.Gu,t.pK,t.Ie,t.Q$,t.q_,t.wd,t.sr,t.j9,t.YI,g.rH]}),l})()}];let A=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[g.Bz.forChild(h),g.Bz]}),l})(),U=(()=>{var r;class l{}return(r=l).\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[y.ez,s.u5,s.UX,t.Pc,A]}),l})()}}]);